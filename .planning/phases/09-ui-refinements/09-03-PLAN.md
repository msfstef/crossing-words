---
phase: 09-ui-refinements
plan: 03
type: execute
---

<objective>
Fix broken toolbar dialogs (Check/Reveal/Settings) and consolidate Check, Reveal, and Auto-check into the Settings menu. Relocate Share button and improve its styling.

Purpose: Reduce toolbar clutter, fix non-functional dialogs, and make controls easier to find.
Output: Working Settings dialog with Check/Reveal/Auto-check controls, relocated Share button with standard icon.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-ui-refinements/09-CONTEXT.md

**Relevant source files:**
@src/components/Toolbar.tsx
@src/components/Toolbar.css
@src/components/SettingsMenu.tsx
@src/components/SettingsMenu.css
@src/components/Layout/SolveHeader.tsx
@src/components/Layout/SolveHeader.css
@src/App.tsx

**Prior decisions:**
- SettingsMenu as separate component from Toolbar (08-05)
- Toolbar has Check/Reveal dropdowns + Auto-check toggle (07-03)
- Share button in header with "↗" icon (06-02)

**Known issues from CONTEXT.md:**
- Check, Reveal, Settings gear dialogs don't open (broken)
- Share button has red color (needs neutral styling)
- Auto-check toggle looks basic (needs prettier styling)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix and consolidate Check/Reveal into Settings</name>
  <files>src/components/SettingsMenu.tsx, src/components/SettingsMenu.css</files>
  <action>
Expand SettingsMenu to include Check, Reveal, and Auto-check controls:
- Add new sections to the dropdown:
  1. "Check" section with Letter/Word/Puzzle buttons
  2. "Reveal" section with Letter/Word/Puzzle buttons
  3. "Auto-check" toggle (styled nicely as a switch)
  4. "Theme" section (existing)

Update SettingsMenu props to receive the check/reveal callbacks:
- onCheckLetter, onCheckWord, onCheckPuzzle
- onRevealLetter, onRevealWord, onRevealPuzzle
- autoCheckEnabled, onAutoCheckToggle

Styling for sections:
- Use section headers like "Check", "Reveal", "Settings"
- Button rows for Check/Reveal options
- Styled toggle switch for Auto-check (not plain checkbox)
- Clear visual hierarchy with spacing between sections

Auto-check toggle styling:
- Use a proper toggle/switch UI (track + knob pattern)
- Active state in accent color
- Smooth transition animation
- Label "Auto-check" next to toggle

Note: Keep the Settings gear (⚙) button, but it now opens an expanded menu with all these options.
  </action>
  <verify>Settings menu opens, shows Check/Reveal/Auto-check sections, all buttons work</verify>
  <done>SettingsMenu consolidates Check/Reveal/Auto-check with proper sections and styled toggle</done>
</task>

<task type="auto">
  <name>Task 2: Update header and remove old Toolbar</name>
  <files>src/components/Layout/SolveHeader.tsx, src/components/Layout/SolveHeader.css, src/App.tsx</files>
  <action>
Update SolveHeader to:
1. Remove menuContent prop and Toolbar rendering from header
2. Move Share button next to Settings gear
3. Update Share button styling:
   - Use standard share icon (Web Share API icon or simple "⤴" / share-ios style)
   - Remove red color - use neutral text color
   - Make it match Settings gear button style
4. Add Settings gear button directly in header (was in menuContent)

Header layout should be:
[Back] [Title • Date] [spacer] [Collaborators] [Connection] [Share] [Settings]

Update App.tsx:
- Remove Toolbar component from toolbarContent
- Pass Check/Reveal/Auto-check callbacks directly to SettingsMenu
- SettingsMenu in header area (in SolveHeader or right next to it)

Remove or deprecate:
- Toolbar.tsx (can delete or leave as unused)
- Toolbar.css

Share icon options (pick one that looks good):
- "↗" (current) - may be confusing
- Unicode share: ⤴ or ⎘
- SVG share icon (iOS style or standard)
- Text "Share" with small icon
  </action>
  <verify>Header shows Share and Settings buttons, Settings opens consolidated menu, Share works</verify>
  <done>Header has Share + Settings buttons, Toolbar removed, all actions work from Settings menu</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Consolidated Settings menu with Check/Reveal/Auto-check, relocated Share button</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Open a puzzle (open any from library or import one)
    3. Verify header shows: Back, Title, [spacer], Share button, Settings gear
    4. Tap Settings gear - verify dropdown opens with:
       - Check section (Letter/Word/Puzzle buttons)
       - Reveal section (Letter/Word/Puzzle buttons)
       - Auto-check toggle (styled switch, not checkbox)
       - Theme section (Light/Dark/System)
    5. Tap "Check Letter" - verify it checks current letter
    6. Tap "Reveal Word" - verify it reveals current word
    7. Toggle Auto-check - verify it toggles and styling updates
    8. Verify Share button:
       - Has neutral styling (not red)
       - Shows share icon
       - Tapping opens share dialog
    9. Test on mobile (390px) - verify buttons fit without overflow
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Settings menu opens and shows all sections
- [ ] Check buttons work (letter/word/puzzle)
- [ ] Reveal buttons work (letter/word/puzzle)
- [ ] Auto-check toggle works with nice switch styling
- [ ] Share button has neutral styling and works
- [ ] Header layout is clean without overflow
- [ ] Old Toolbar removed from header
- [ ] npm run build succeeds
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Check/Reveal/Auto-check consolidated into Settings menu
- Share button relocated and styled neutrally
- Header is cleaner with fewer controls visible
</success_criteria>

<output>
After completion, create `.planning/phases/09-ui-refinements/09-03-SUMMARY.md`
</output>
