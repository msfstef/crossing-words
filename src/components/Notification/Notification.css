/**
 * Adaptive notification styles.
 *
 * Two modes:
 * - Compact: Minimal pill at top-center, very discrete for mobile/small viewports
 * - Normal: Slightly more prominent at top-right for larger viewports
 *
 * Both modes are designed to be unobtrusive and never cover important UI.
 */

.notification {
  position: fixed;
  z-index: 1000;
  display: flex;
  align-items: center;
  gap: 0.375rem;
  pointer-events: auto;
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;

  /* GPU acceleration hints for smooth animations */
  will-change: transform, opacity;
  backface-visibility: hidden;
}

/**
 * Compact mode: Minimal pill at top-center
 * Used on mobile and small viewports where space is limited.
 * Designed to be as discrete as possible while still visible.
 */
.notification--compact {
  /* Position at top center, below safe area */
  top: calc(0.5rem + env(safe-area-inset-top, 0px));
  left: 50%;
  transform: translateX(-50%);

  /* Minimal styling */
  padding: 0.375rem 0.75rem;
  font-size: 0.75rem;
  font-weight: 500;
  color: var(--color-text);
  background-color: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 1rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

  /* Enter animation - smooth deceleration curve */
  animation: notification-compact-enter 0.25s cubic-bezier(0.16, 1, 0.3, 1) both;
}

.notification--compact.notification--exiting {
  /* Exit animation - gentle acceleration curve */
  animation: notification-compact-exit 0.15s cubic-bezier(0.4, 0, 1, 1) both;
}

@keyframes notification-compact-enter {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}

@keyframes notification-compact-exit {
  from {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateX(-50%) translateY(-4px) scale(0.98);
  }
}

/**
 * Normal mode: More prominent toast at top-right
 * Used on larger viewports where there's more space.
 */
.notification--normal {
  /* Position at top right, below header */
  top: calc(3.5rem + env(safe-area-inset-top, 0px));
  right: calc(1rem + env(safe-area-inset-right, 0px));

  /* Slightly more prominent styling */
  padding: 0.5rem 0.875rem;
  font-size: 0.8125rem;
  font-weight: 500;
  color: var(--color-text);
  background-color: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: 0.5rem;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.1),
    0 1px 3px rgba(0, 0, 0, 0.08);

  /* Enter animation - smooth deceleration curve */
  animation: notification-normal-enter 0.25s cubic-bezier(0.16, 1, 0.3, 1) both;
}

.notification--normal.notification--exiting {
  /* Exit animation - gentle acceleration curve */
  animation: notification-normal-exit 0.15s cubic-bezier(0.4, 0, 1, 1) both;
}

@keyframes notification-normal-enter {
  from {
    opacity: 0;
    transform: translateX(8px) scale(0.97);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

@keyframes notification-normal-exit {
  from {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateX(4px) scale(0.98);
  }
}

/**
 * Icon styling
 */
.notification__icon {
  flex-shrink: 0;
  font-size: 0.875em;
  line-height: 1;
}

/**
 * Message text
 */
.notification__message {
  line-height: 1.3;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
}

/* Allow slightly longer messages on larger viewports */
.notification--normal .notification__message {
  max-width: 280px;
}

/**
 * Reduce motion support
 */
@media (prefers-reduced-motion: reduce) {
  .notification--compact,
  .notification--normal,
  .notification--compact.notification--exiting,
  .notification--normal.notification--exiting {
    animation: none;
    opacity: 1;
    transform: none;
  }

  .notification--compact.notification--exiting,
  .notification--normal.notification--exiting {
    opacity: 0;
  }
}

/**
 * Dark mode adjustments
 */
@media (prefers-color-scheme: dark) {
  .notification--compact,
  .notification--normal {
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
  }
}
